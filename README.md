# YuantsDesktopEdgeSegmentation

## 1. 项目简介

此项目是AIDesktopagent项目(一种人工智能桌面代理，能够通过屏幕流与计算机系统交互，并通过光标和键盘动作提供输出

AI为你提供母语级高精翻译)的分支项目,用于处理计算机视觉相关问题:

从个人电脑执行电脑视觉分析截图, 包括但不限于:

1. 边缘检测, 文字、以线为基础的图标识别, 自然图像识别, 用于分割的直线识别, 图像分割
2. 利用api和相关论文中的现有模型完成传统的CV任务

## 2. 配置安装说明

1. 克隆该存储库或下载脚本到本地机器:

   ```python
   git clone https://github.com/your_username/your_repository.git
   cd your_repository
   ```

2. 创建并激活虚拟环境（推荐）：

   ```python
   python -m venv venv
   source venv/bin/activate  # 对于Windows用户，使用 `venv\Scripts\activate`
   ```

3. 依赖库

   确保已安装以下库： 

   numpy 

   pillow 

   scikit-learn
   ......
   
   你可以使用以下命令安装这些依赖项：

```python
pip install -r requirements.txt
```

## 3. 使用方法

要运行该脚本，请按照以下步骤操作：

1. 打开终端或命令提示符，并导航到脚本所在的目录
2. 使用 Python 运行脚本：

```python
python edge.py
```

运行该脚本后，将执行以下步骤：

1. 在延迟3秒后捕获屏幕截图并保存为 `screenshot0.png`

2. 使用简单差分法检测截图中的边缘

3. 保存边缘检测结果

4. 分类检测到的边缘元素，包括文本/图标、直线和不规则大形状(自然图像)

5. 从截图中提取文本和图标

6. 为直线添加标签

7. 为不规则大形状添加红色边框

8. 获取边缘图信息

9. 合并所有信息并生成带标签的可视化图像

10. 保存带标签的可视化图像为 `labeled_screenshot0.png`

## 4. 工作日志

2024-7-10

目前项目对于文字和以线为基础的图标的识别十分精准

![](data\doc\labelledTextIcon\screenshot_with_ocr1.png)

利用腾讯云的api对图像中的文字进行识别, 注意配置环境变量, 即SECRET_ID和SECRET_KEY, 但是有一些靠近边缘部分而且有背景色的这些文字或图标较难识别.

下面是对于截屏中图像的识别:

![](data\doc\labelledImage\labeled_screenshot1.png)

从中可以看到, 对于相对分离的图片, 可以准确地对它们进行识别和标记.
但是有一些情况却很难对图片进行有效的识别, 如下图所示:

![](data\doc\labelledImage\labeled_screenshot2.png)

当图片边缘图的连通区域和其他连通域相连时, 识别的不准确, 尤其是和边框相连.

那么也有可能图片和图片相连,如下图所示:

![](data\doc\labelledImage\labeled_screenshot3.png)

从图中可以看出即使是图片相叠加, 也是可以识别出图像区域的, 但是和边界连通区相连时, 会被识别为边界.

也许可以尝试限定边缘像素的位置, 因为其实处于下方边栏部分的边缘像素对于图像的识别没有什么帮助.

![](data\doc\labelledImage\labeled_screenshot4.png)

在上图中我们可以看出, 图像如果和右边框相连, 那么也会被识别为用于分割的直线连通区域

所以也许我们可以先对边缘像素的坐标进行处理, 在识别图片时对边缘像素的位置进行限定, 十分靠下的像素(属于下边栏内部区域或过于靠近右侧边栏), 处理完之后将属于图像的坐标从边缘像素中除去.

之后识别用于分割的直线, 将已经删去图像坐标的边缘像素进一步限定(属于下边框的像素除去), 对直线进行识别

那么分割线的问题和图片问题在上述描述中以一并说到.

再尝试了其他用于识别嵌入图像和分割线的方法后, 发现有些效果很差, 有些则是需要大量的数据来进行训练, 都不是很合适, 所以选择对原算法进行进一步优化. 这些尝试在tests文件夹中可以找到(但也只是尝试中的一部分).

## 5. 联系信息

